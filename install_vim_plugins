#!/bin/bash

echo rm -rf ~/.vim/bundle
rm -rf ~/.vim/bundle

plugins_dir=~/.vim/pack/plugins/start
mkdir -pv "$plugins_dir"
echo cd "$plugins_dir"
cd "$plugins_dir" || exit 1

plugins='
altercation/vim-colors-solarized
justinmk/vim-sneak
tpope/vim-sensible
tpope/vim-surround
tpope/vim-repeat
tpope/vim-rsi
tpope/vim-fugitive
tpope/vim-endwise
airblade/vim-gitgutter
haya14busa/incsearch.vim
scrooloose/nerdcommenter
mbbill/undotree
junegunn/goyo.vim
sheerun/vim-polyglot
junegunn/fzf.vim
junegunn/fzf
majutsushi/tagbar
godlygeek/tabular
dense-analysis/ale
racer-rust/vim-racer
francoiscabrol/ranger.vim
rbgrouleff/bclose.vim
'

for p in $plugins; do
    git clone --depth 1 https://github.com/"$p".git
done

# vim-go
source ~/.bash_functions || exit 1
git clone --depth 1 https://github.com/fatih/vim-go.git &&
    cd vim-go &&
    git checkout "$(get_latest_release fatih/vim-go)" &&
    cd ..

if [ -d ~/.vim/pack/coc ]; then
    echo coc.nvim already installed
else
    # Install node and npm
    curl -sL install-node.now.sh/lts | sudo bash

    # Install coc.nvim
    mkdir -p ~/.vim/pack/coc/start
    cd ~/.vim/pack/coc/start
    curl --fail -L https://github.com/neoclide/coc.nvim/archive/release.tar.gz|tar xzfv -
fi
