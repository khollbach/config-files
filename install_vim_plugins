#!/bin/bash

echo rm -rf ~/.vim/bundle
rm -rf ~/.vim/bundle

plugins_dir=~/.vim/pack/plugins/start
mkdir -pv "$plugins_dir"
echo cd "$plugins_dir"
cd "$plugins_dir"

plugins='
altercation/vim-colors-solarized
justinmk/vim-sneak
tpope/vim-sensible
tpope/vim-surround
tpope/vim-repeat
tpope/vim-rsi
tpope/vim-fugitive
airblade/vim-gitgutter
haya14busa/incsearch.vim
mileszs/ack.vim
scrooloose/nerdcommenter
scrooloose/nerdtree
mbbill/undotree
wellle/context.vim
junegunn/goyo.vim
sheerun/vim-polyglot
junegunn/fzf.vim
junegunn/fzf
'

for p in $plugins; do
    git clone https://github.com/"$p".git
done

# https://gist.github.com/lukechilds/a83e1d7127b78fef38c2914c4ececc3c
get_latest_release() {
  curl --silent "https://api.github.com/repos/$1/releases/latest" | # Get latest release from GitHub api
    grep '"tag_name":' |                                            # Get tag line
    sed -E 's/.*"([^"]+)".*/\1/'                                    # Pluck JSON value
}

git clone https://github.com/fatih/vim-go.git &&
    cd vim-go &&
    git checkout $(get_latest_release fatih/vim-go) 2>/dev/null
