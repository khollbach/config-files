## Options

# Assume xterm-256color terminals support true (24 bit) color.
set-option -ga terminal-overrides ",xterm-256color:Tc"

# Send escape key almost right away when pressed (5 ms).
# When this was set to 0, I occasionally had issues.
set-option -g escape-time 5

# Keep more history
set-option -g history-limit 10000

# Use emacs-style keybindings in command-line mode.
set-option -g status-keys emacs

# Use vi-style keybindings in copy mode.
set-option -g mode-keys vi



## Keybinds.

# Change prefix key.
unbind-key C-b
set-option -g prefix M-a
bind-key M-a send-prefix

# Send prefix in one keypress. Good for nested sessions / ssh.
bind-key -n M-s send-prefix

# Open tmux command-line in fewer keypresses.
bind-key -n M-\; command-prompt

# Switch panes.
bind-key -n M-k select-pane -U
bind-key -n M-j select-pane -D
bind-key -n M-h select-pane -L
bind-key -n M-l select-pane -R

# Resize panes.
bind-key -n M-K resize-pane -U 5
bind-key -n M-J resize-pane -D 5
bind-key -n M-H resize-pane -L 5
bind-key -n M-L resize-pane -R 5

# Split window.
bind-key j split-window -c "#{pane_current_path}"
bind-key l split-window -c "#{pane_current_path}" -h
bind-key k split-window -c "#{pane_current_path}" \; swap-pane -U
bind-key h split-window -c "#{pane_current_path}" -h \; swap-pane -U

# Swap two ajacent panes.
bind-key M-k swap-pane -d -t {up-of}
bind-key M-j swap-pane -d -t {down-of}
bind-key M-h swap-pane -d -t {left-of}
bind-key M-l swap-pane -d -t {right-of}

# Re-bind last-window.
bind-key / last-window

# New window.
bind-key c new-window -c "#{pane_current_path}"



## Copy mode binds.

# Use v to select text in vi-style copy mode (spacebar still works too).
# And rebind rectangle-toggle to C-v (it's bound to v by default).
bind-key -T copy-mode-vi v send-keys -X begin-selection
bind-key -T copy-mode-vi C-v send-keys -X rectangle-toggle

# Yank to the system clipboard by default.
bind-key -T copy-mode-vi Enter send-keys -X copy-pipe-and-cancel "xclip -in -selection clipboard"

# Yank the selection (to the system clipboard) without leaving copy mode.
# This command (and copy-selection) are a little buggy for me; they garble
# the screen when called, priting an MD5 hash (?) over the yanked selection.
bind-key -T copy-mode-vi y send-keys -X copy-pipe "xclip -in -selection clipboard"
